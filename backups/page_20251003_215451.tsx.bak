import Link from "next/link";

export const metadata = {
  title: "Site Sciences â€” Apprendre, s'entraÃ®ner, progresser",
  description: "Exercices en solo, tutoriels, suivi de progression. Essai gratuit 3 jours.",
};

// Petite carte interactive accessible (entiÃ¨rement cliquable)
function CardLink(props: {
  href: string;
  title: string;
  desc: string;
  icon?: React.ReactNode;
  gradient?: string;
}) {
  const { href, title, desc, icon, gradient } = props;
  const g = gradient ?? "from-emerald-50 to-emerald-100/60 dark:from-slate-800 dark:to-slate-800/60";
  return (
    <Link
      href={href}
      className={`group relative block rounded-2xl border shadow-sm overflow-hidden focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500`}
      aria-label={title}
    >
      <div className={`absolute inset-0 bg-gradient-to-br ${g} transition-opacity duration-300 group-hover:opacity-100`} />
      {/* Halo */}
      <div className="pointer-events-none absolute -inset-px rounded-2xl opacity-0 blur-0 transition-[opacity,filter] duration-300 group-hover:opacity-100 group-hover:blur-sm bg-emerald-400/20" />
      <div className="relative p-6">
        <div className="flex items-start gap-3">
          <div className="text-2xl" aria-hidden="true">{icon ?? "ğŸ“˜"}</div>
          <h3 className="text-lg font-semibold">{title}</h3>
        </div>
        <p className="mt-2 text-sm text-muted-foreground">{desc}</p>
        <div className="mt-4 inline-flex items-center gap-2 text-sm font-medium text-emerald-700 underline-offset-4 group-hover:underline">
          Ouvrir
          <svg className="h-4 w-4 transition-transform duration-300 group-hover:translate-x-0.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path d="M12.293 3.293a1 1 0 011.414 0L18 7.586a1 1 0 010 1.414l-4.293 4.293a1 1 0 01-1.414-1.414L14.586 9H4a1 1 0 110-2h10.586l-2.293-2.293a1 1 0 010-1.414z"/>
          </svg>
        </div>
      </div>
      {/* Micro-Ã©lÃ©vation */}
      <div className="absolute inset-0 rounded-2xl transition-transform duration-300 group-hover:-translate-y-0.5" />
    </Link>
  );
}

export default function HomePage() {
  return (
    <main className="min-h-screen bg-background text-foreground">
      {/* Bandeau essai gratuit */}
      <div className="w-full bg-emerald-600 text-white">
        <div className="mx-auto max-w-6xl px-4 py-2 text-center text-sm sm:text-base">
          <strong>Inscris-toi et teste gratuitement pendant 3 jours</strong>
        </div>
      </div>

      {/* Hero + CTA */}
      <section className="mx-auto max-w-6xl px-4 py-10 sm:py-14">
        <div className="grid items-center gap-8 md:grid-cols-2">
          <div>
            <h1 className="text-3xl font-bold sm:text-4xl md:text-5xl">
              Apprendre plus vite, progresser sereinement
            </h1>
            <p className="mt-4 text-muted-foreground">
              Exercices guidÃ©s, tutoriels clairs, suivi par niveau et matiÃ¨res. Les modes
              complÃ©mentaires (TDAH, DYS, TSA, HPI) sâ€™appliquent Ã  <em>toutes</em> les matiÃ¨res et
              Ã  <em>tous</em> les niveaux.
            </p>

            {/* CTA e-mail non bloquant : redirection simple */}
            <form action="/register" method="get" className="mt-6 flex max-w-md gap-2">
              <input
                type="email"
                name="email"
                placeholder="Ton e-mail"
                className="w-full rounded-lg border px-3 py-2 outline-none focus:ring"
                aria-label="Adresse e-mail"
              />
              <button
                type="submit"
                className="rounded-lg border border-emerald-700 bg-emerald-600 px-4 py-2 font-medium text-white hover:bg-emerald-700 active:scale-[0.99] transition-transform"
              >
                Commencer lâ€™essai
              </button>
            </form>

            <div className="mt-4 text-sm text-muted-foreground">
              DÃ©jÃ  inscrit ?{" "}
              <Link href="/login" className="underline underline-offset-4 hover:text-foreground">
                Me connecter
              </Link>
            </div>

            <div className="mt-6">
              <Link
                href="/panier"
                className="inline-flex items-center gap-2 rounded-lg border px-4 py-2 hover:bg-accent active:scale-[0.99] transition"
              >
                Choisir mon niveau et ma matiÃ¨re
              </Link>
            </div>
          </div>

          {/* EncadrÃ© bÃ©nÃ©fices */}
          <div className="rounded-2xl border p-6">
            <ul className="space-y-3 text-sm">
              <li>âœ”ï¸ Exercices interactifs et explications pas Ã  pas</li>
              <li>âœ”ï¸ Suivi de ta progression par chapitre</li>
              <li>âœ”ï¸ Conseils adaptÃ©s (TDAH, DYS, TSA, HPI) activables</li>
              <li>âœ”ï¸ Mode Famille disponible avec remise dÃ©diÃ©e</li>
            </ul>
          </div>
        </div>
      </section>

      {/* Grille de sections (2 lignes / 3 colonnes) */}
      <section className="mx-auto max-w-6xl px-4 pb-12">
        <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {/* 1Ã¨re ligne */}
          <CardLink
            href="/exercices"
            title="Exercices en solo"
            desc="EntraÃ®ne-toi Ã  ton rythme avec corrections immÃ©diates et rappels de mÃ©thode."
            icon={<span>ğŸ§ </span>}
            gradient="from-emerald-50 to-emerald-100/70 dark:from-slate-800 dark:to-slate-800/60"
          />
          <CardLink
            href="/tutoriels"
            title="Tutoriels"
            desc="Des explications claires, des exemples progressifs et des astuces concrÃ¨tes."
            icon={<span>ğŸ“š</span>}
            gradient="from-sky-50 to-sky-100/70 dark:from-slate-800 dark:to-slate-800/60"
          />
          <CardLink
            href="/multijoueur"
            title="Multi-joueur"
            desc="DÃ©fis en live, mini-jeux et classements: rÃ©vise en tâ€™amusant, seul ou avec tes amis."
            icon={<span>ğŸ®</span>}
            gradient="from-violet-50 to-violet-100/70 dark:from-slate-800 dark:to-slate-800/60"
          />

          {/* 2Ã¨me ligne */}
          <CardLink
            href="/favoris"
            title="Ta sÃ©lection"
            desc="Retrouve vite les chapitres et exercices que tu as mis en favori."
            icon={<span>â­ï¸</span>}
            gradient="from-amber-50 to-amber-100/70 dark:from-slate-800 dark:to-slate-800/60"
          />
          <CardLink
            href="/progression"
            title="Ta progression"
            desc="Suis tes rÃ©ussites, repÃ¨re les notions Ã  revoir et dÃ©bloque des badges."
            icon={<span>ğŸ“ˆ</span>}
            gradient="from-rose-50 to-rose-100/70 dark:from-slate-800 dark:to-slate-800/60"
          />
          <CardLink
            href="/faq"
            title="Modes complÃ©mentaires"
            desc="Active TDAH, DYS, TSA ou HPI : appliquÃ©s Ã  toutes les matiÃ¨res et niveaux."
            icon={<span>ğŸ§©</span>}
            gradient="from-teal-50 to-teal-100/70 dark:from-slate-800 dark:to-slate-800/60"
          />
        </div>
      </section>

      {/* Bandeau bas de page vers Tarifs */}
      <section className="mx-auto max-w-6xl px-4 pb-16">
        <div className="rounded-2xl border p-6 text-center">
          <p className="text-sm text-muted-foreground">
            Tu veux comparer les plans ? Les prix sâ€™ajustent en direct selon tes matiÃ¨res,
            ton niveau et le mode Famille.
          </p>
          <div className="mt-4">
            <Link
              href="/tarifs"
              className="inline-flex items-center rounded-lg border px-4 py-2 hover:bg-accent active:scale-[0.99] transition"
            >
              Voir les tarifs
            </Link>
          </div>
        </div>
      </section>
    </main>
  );
}
